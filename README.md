# Citadel-Financial-Discord-Bot
A currency tracker for online ttrpgs.

This program serves as a command based discord bot that will create an external json file using a key that is a combination of the user's id and the server id.  This is so that each individual can have an account for each server that they and the bot are in together.  There are two types of commands, user and "DM".  In ttrpgs, the DM serves as an admin of sorts, so they have permission to add and remove funds to every user in the discord server that they are present in.  The DM permissions are either granted or denied by having the role of "DM" in a specific discord server.  The DM has access to all user commands for their own account as well.  The users can request a list of commands using a help command, check their own balance, and spend their funds which lowers their account balance.  Whenever a user sends a command, the program checks to see if a variable with their balance exists.  If not, it checks to see if an external json file with their key exists.  If neither exist, then the program stores an account balance of zero and writes an external json file with that user's key and balance.  Since this program was not intended to be online all the time like a server, I designed it to hard write all account values in the json files so I could terminate the program at any time and the progress would be saved.  Every time an account balance is updated, the variable that actively stores that value in the program is updated, and the json file is completely rewritten using the updated variable value.  

There is a config.json that holds my discord bot token that I will not be sharing for security reasons.  The only two strings read from that file are the token and "prefix" of "CF, ", which serves as the signifier that a command is to be recognized by my bot.  For example, the "balance" command is used in the server by sending "CF, balance" to any channel the bot has permission to view.

I built this program from scratch in Visual Studio Code, and while it has many new error messsages since I updated VSC(mainly telling me to use "let" before declaring vars), the program still runs just as it should.  I have gotten a large amount of use from this bot as a player in a Dungeons and Dragons 5e campaign set in a homebrewed pre-Eberron that has a side focus around corporations and managing a massive company that mass produces magic items.  

The discord.js module is required for this program to function.  
